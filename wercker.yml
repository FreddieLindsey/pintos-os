box: freddielindsey/pintos

build:
  steps:
    - script:
      name: Testing src/devices
      code: |
        make -C src/devices

deploy:
  steps:
    - script:
      name: Checking src/devices
      code: |
        make -C src/devices check
    - script:
      name: Code checked successfully!
    - script:
      name: Get Gitlab key
      code: |
        echo $GITLAB_KEY_PRIVATE > private.key
    - script:
      name: Pushing to gitlab
      code: |
        git remote add gitlab git@gitlab.doc.ic.ac.uk:lab1516_spring/pintos_12.git
        git push -i private.key gitlab master
